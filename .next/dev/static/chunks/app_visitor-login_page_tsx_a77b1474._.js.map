{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/chairbord/Desktop/code/create-quotation-flow/app/visitor-login/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { useAuth } from \"@/lib/auth-context\"\n\nexport default function VisitorLoginPage() {\n  const router = useRouter()\n  const { isAuthenticated, role } = useAuth()\n\n  useEffect(() => {\n    // Redirect to main login page\n    if (isAuthenticated && role === \"visitor\") {\n      router.push(\"/visitor/dashboard\")\n    } else {\n      router.push(\"/login\")\n    }\n  }, [isAuthenticated, role, router])\n\n  return null\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!credentials.username || !credentials.password) {\n      setError(\"Please enter username and password\")\n      return\n    }\n\n    setIsLoading(true)\n    setError(\"\")\n\n    try {\n      // Ensure visitors are seeded before login attempt\n      seedDummyData()\n      \n      const success = await login(credentials.username, credentials.password)\n      if (success) {\n        // Small delay to ensure state is updated\n        setTimeout(() => {\n          router.push(\"/visitor/dashboard\")\n        }, 100)\n      } else {\n        // Check if visitors exist in localStorage for debugging\n        const visitors = JSON.parse(localStorage.getItem(\"visitors\") || \"[]\")\n        if (visitors.length === 0) {\n          setError(\"No visitors found. Please refresh the page.\")\n        } else {\n          setError(\"Invalid username or password. Please check your credentials.\")\n        }\n      }\n    } catch (err) {\n      console.error(\"Login error:\", err)\n      setError(\"Login failed. Please try again.\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex flex-col\">\n      {/* Header */}\n      <header className=\"border-b border-border bg-card\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <SolarLogo />\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"flex-1 flex items-center justify-center px-4 py-12\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"space-y-1 text-center\">\n            <CardTitle className=\"text-2xl font-bold\">Visitor Login</CardTitle>\n            <CardDescription>Login to view your assigned visits</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              {error && (\n                <div className=\"bg-destructive/10 text-destructive text-sm p-3 rounded-md border border-destructive/20\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\">Username</Label>\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  placeholder=\"Enter your username\"\n                  value={credentials.username}\n                  onChange={(e) => setCredentials({ ...credentials, username: e.target.value })}\n                  required\n                  disabled={isLoading}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\">Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    placeholder=\"Enter your password\"\n                    value={credentials.password}\n                    onChange={(e) => setCredentials({ ...credentials, password: e.target.value })}\n                    required\n                    disabled={isLoading}\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"absolute right-0 top-0 h-full\"\n                    onClick={() => setShowPassword(!showPassword)}\n                  >\n                    {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                  </Button>\n                </div>\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n                {isLoading ? \"Logging in...\" : \"Login\"}\n              </Button>\n\n              <div className=\"text-center text-sm text-muted-foreground\">\n                <p>Demo credentials:</p>\n                <p className=\"font-mono text-xs mt-1\">\n                  visitor1 / visitor123\n                  <br />\n                  visitor2 / visitor123\n                  <br />\n                  visitor3 / visitor123\n                </p>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </main>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,GAAG,IAAA,qIAAO;IAEzC,IAAA,0KAAS;sCAAC;YACR,8BAA8B;YAC9B,IAAI,mBAAmB,SAAS,WAAW;gBACzC,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QACF;qCAAG;QAAC;QAAiB;QAAM;KAAO;IAElC,OAAO;;;IAEP,MAAM;AAsHR;GArIwB;;QACP,kJAAS;QACU,qIAAO;;;KAFnB"}}]
}